<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Relay Van Driver Pay Calculator </title>

    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="page-title">Relay Van Driver Pay Calculator: UB11 (West London)</h1>

        <section class="calculator">
            <div class="form-row">
                <div class="form-group-col">
                    <label for="shiftDuration">1. Shift duration</label>
                    <select id="shiftDuration"></select>
                </div>
                <div class="form-group-col">
                    <label for="vanType">2. Van</label>
                    <select id="vanType">
                        <option value="LWB">Long Wheelbase (LWB)</option>
                        <option value="XLWB">Extra Long Wheelbase (XLWB)</option>
                        <option value="Luton">Luton Van</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group-col">
                    <label for="daysWeek">3. Days per week: <span id="daysLabel">5</span></label>
                    <input id="daysWeek" type="range" min="1" max="7" step="1" value="5" />
                    <div class="hint" aria-live="polite">Move the slider to change days.</div>
                </div>
                <div class="form-group-col"></div>
            </div>

            <div id="results-container" aria-live="polite"></div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const VAN_TYPES = {
                'LWB':   { bags: 75 },
                'XLWB':  { bags: 105 },
                'Luton': { bags: 120 }
            };

            // ONLY UB11 ROUTES
            const ROUTE_DATA = {
                'UB11': {
                    'West London': {stops:5,miles:40,shift:6},
                    'SE London':   {stops:5,miles:56,shift:8},
                    'NE London':   {stops:6,miles:85,shift:8}
                }
            };

            const shiftEl   = document.getElementById('shiftDuration');
            const vanTypeEl = document.getElementById('vanType');
            const daysEl    = document.getElementById('daysWeek');

            // HARDCODED DEPOT
            const DEPOT_CODE = 'UB11';

            function populateShiftDurations() {
                const depotRoutes = ROUTE_DATA[DEPOT_CODE];
                
                const durations = new Set();
                Object.values(depotRoutes).forEach(route => durations.add(route.shift));
                
                const sortedDurations = [...durations].sort((a, b) => a - b);

                shiftEl.innerHTML = '';
                sortedDurations.forEach(duration => {
                    const opt = document.createElement('option');
                    opt.value = duration;
                    opt.textContent = `${duration} hours`;
                    shiftEl.appendChild(opt);
                });
            }

            // PAY FUNCTION FOR UB11 ONLY (bag-based bands)
            function payFor(hours, vanType) {
                const bags = VAN_TYPES[vanType].bags;

                if (hours === 6) {
                    if (bags <= 64)  return 95;
                    if (bags <= 80)  return 105;
                    if (bags <= 94)  return 110;
                    if (bags <= 110) return 115;
                    return 120;
                }
                if (hours === 8) {
                    if (bags <= 64)  return 125;
                    if (bags <= 80)  return 135;
                    if (bags <= 94)  return 140;
                    if (bags <= 110) return 145;
                    return 150;
                }
                
                return null;
            }

            function fmt(x){return x===null?'N/A':'Â£'+Math.round(x);}

            function render(){
                const shiftHours = Number(shiftEl.value);
                if (!shiftHours) return;

                const days    = Number(daysEl.value);
                const vanType = vanTypeEl.value;

                document.getElementById('daysLabel').textContent = days;

                const perShift = payFor(shiftHours, vanType);
                const weekly   = perShift ? perShift * days : null;
                
                // Find all areas that match the selected shift duration
                const matchingAreas = [];
                const depotRoutes = ROUTE_DATA[DEPOT_CODE];
                for (const areaName in depotRoutes) {
                    if (depotRoutes[areaName].shift === shiftHours) {
                        matchingAreas.push(areaName);
                    }
                }
                const areaListStr = matchingAreas.length > 0 ? matchingAreas.join(' or ') : 'N/A';

                const c = document.getElementById('results-container');
                c.innerHTML = `
                    <div class="hero-result">
                        <div class="label">Estimated weekly pay</div>
                        <div class="value-chip">${fmt(weekly)}</div>
                    </div>
                    <div class="other-metrics">
                        <div class="metric">
                            <div class="v">${fmt(perShift)}</div>
                            <div class="k">Per shift</div>
                        </div>
                        <div class="metric">
                            <div class="v">${shiftHours} hours</div>
                            <div class="k">Shift length</div>
                        </div>
                    </div>
                    <div class="compatible-areas">
                        <div class="label">Possible areas for this shift (UB11 Depot)</div>
                        <div class="area-list">${areaListStr}</div>
                    </div>`;
            }

            // Set up listeners
            shiftEl.addEventListener('change', render);
            vanTypeEl.addEventListener('change', render);
            daysEl.addEventListener('input', render);

            // Initial setup
            populateShiftDurations();
            render();
        });
    </script>
</body>
</html>
